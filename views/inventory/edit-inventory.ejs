<%# Content Heading %>
<% if (title) { %>
    <h1><%= title %></h1>
    <% } else {
        res.redirect('/')
    } %>
    
    <%- messages() %>
    <% if (errors) { %>
        <ul class="notice">
            <% errors.array().forEach(error => { %>
                <li><%= error.msg %></li>
            <% }) %>
        </ul> 
    <% } %>

    <form action="/inv/update" id="updateForm" method="post">
        <fieldset>
            <label>Classification 
                <%- dropdown %>
            </label>
            <label>Make 
                <input type="text" id="make" name="inv_make" required value="<%= locals.inv_make %>"
                pattern="[a-zA-Z0-9\s_-]+" title="Please enter a valid make"></label>
            <label>Model 
                <input type="text" id="model" name="inv_model" required value="<%= locals.inv_model %>"
                pattern="[a-zA-Z0-9\s_-]+" title="Please enter a valid model"></label>
            <label>Description 
                <textarea id="Description" name="inv_description" required title="Please enter a valid description">
                    <%= locals.inv_description %>
                </textarea>
            </label>
            <label>Image Path 
                <input type="text" id="img_path" name="inv_image" required value="<%= locals.inv_image %>"
                pattern="[a-zA-Z0-9_-]+(\.[a-zA-Z]{1,4})?" title="Please enter a valid image path"></label>
            <label>Thumbnail Path 
                <input type="text" id="thmb_path" name="inv_thumbnail" required value="<%= locals.inv_thumbnail %>"
                pattern="[a-zA-Z0-9_-]+(\.[a-zA-Z]{1,4})?" title="Please enter a valid thumbnail path"></label>
            <label>Price 
                <input type="number" id="price" name="inv_price" required value="<%= locals.inv_price %>"
                step="0.01" min="0.01"></label>
            <label>Year
                <input type="number" id="year" name="inv_year" required value="<%= locals.inv_year || 2024 %>"
                pattern="\d{4}" title="Please enter a valid year (four digits)" ></label>
            <label>Miles 
                <input type="number" id="miles" name="inv_miles" required value="<%= locals.inv_miles %>"
                min="0"></label>
            <label>Color 
                <input type="text" id="color" name="inv_color" required value="<%= locals.inv_color %>"
                pattern="[a-zA-Z\s]+" title="Please enter a valid color"></label>
            <button type="submit" disabled>Update Vehicle</button>
            <input type="hidden" name="inv_id"
            <% if(locals.inv_id) { %> value="<%= locals.inv_id %>"
            <% } %>>
        </fieldset>
    </form>
    <script src="/js/inv-update.js"></script>